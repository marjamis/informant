{% extends "public/base.html" %}

{% load django_bootstrap5 %}
{% load custom_tags %}

{% block content %}
<div id="page-wrapper">
  <div class="row">
    <div class="col-lg-12">
      <h1 class="page-header">Processed data</h1>
    </div>
  </div>
  <!-- /.row -->
  <div class="row">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          Details
        </div>
        <!-- /.panel-heading -->
        <dl>
          <dt>Search Key:</dt>
          <dd>{{details.searchKey}}</dd>
          <dt>Account:</dt>
          <dd>{{details.account}}</dd>
          <dt>Location:</dt>
          <dd>{{details.location}}</dd>
          <dt>Date run:</dt>
          <dd>{{details.dateRun}}</dd>
          <dt>Date for:</dt>
          <dd>{{details.dateFor}}</dd>
        </dl>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.row -->
  <div class="row">
    <div class="col-lg-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          Breakdown of Specific API calls
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
          <div class="flot-chart">
            <div class="flot-chart-content" id="flot-pie-chart0"></div>
          </div>
        </div>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
    <div class="col-lg-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          Breakdown of Event Sources
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
          <div class="flot-chart">
            <div class="flot-chart-content" id="flot-pie-chart1"></div>
          </div>
        </div>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
  </div>
  <!-- /.row -->
  <div class="row">
    <div class="col-lg-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          Breakdown of User Agents
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
          <div class="flot-chart">
            <div class="flot-chart-content" id="flot-pie-chart2"></div>
          </div>
        </div>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
    <div class="col-lg-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          Breakdown of Regions
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
          <div class="flot-chart">
            <div class="flot-chart-content" id="flot-pie-chart3"></div>
          </div>
        </div>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
    <!-- /.panel -->
  </div>
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
        Table of API calls
      </div>
      <div class="panel-body">
        <table class="table table-striped table-condensed tablesorter">
          <thead>
            <tr>
              {% for value in subset_headers %}
              <th>{{value}}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for value in subset_calls %}
            <tr>
              {% for cell in value %}
              <td>{{cell}}</td>
              {% endfor %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
        Click <a href="/full_results/?prev={{details.searchKey}}">here</a> for full details on each call or <a
          href="/raw_data/?prev={{details.searchKey}}"> here</a> for the raw json
      </div>
    </div>
  </div>
</div>
{% endblock %}
